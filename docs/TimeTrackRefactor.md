# TimeTrack æ¨¡å—é‡æ„å®Œæˆæ€»ç»“

## âœ… å®Œæˆçš„å·¥ä½œ

### 1. æ–‡ä»¶é‡æ„

#### åˆ›å»ºçš„æ–°æ–‡ä»¶
- âœ… `Dashboard.tsx` - æ—¶é—´è½´ä»ªè¡¨ç›˜ï¼ˆåŸ TimeTrackPage å†…å®¹ï¼‰
- âœ… `TimeTrackCategory.tsx` - åˆ†ç±»ç®¡ç†é¡µé¢ï¼ˆåŒ…è£… CategoryManagerï¼‰
- âœ… `TimeTrackPage.module.css` - å®¹å™¨é¡µé¢æ ·å¼
- âœ… `TimeTrackCategory.module.css` - åˆ†ç±»é¡µé¢æ ·å¼
- âœ… `index.ts` - Timeline æ¨¡å—ç»Ÿä¸€å¯¼å‡º
- âœ… `README.md` - æ¨¡å—é‡æ„è¯´æ˜æ–‡æ¡£

#### ä¿®æ”¹çš„æ–‡ä»¶
- âœ… `TimeTrackPage.tsx` - æ”¹é€ ä¸ºåŒ…å«å­å¯¼èˆªçš„å®¹å™¨ç»„ä»¶
- âœ… `registerRoute.ts` - æ³¨å†Œä¸»è·¯ç”±å’Œä¸¤ä¸ªå­è·¯ç”±

### 2. è·¯ç”±æ³¨å†Œ

```typescript
registerTimeTrackRoutes() æ³¨å†Œäº† 3 ä¸ªè·¯ç”±ï¼š

1. timetrack (ä¸»è·¯ç”±ï¼Œæ˜¾ç¤ºåœ¨ä¸»å¯¼èˆª)
   - åç§°: æ—¶é—´è¿½è¸ª
   - å›¾æ ‡: â±ï¸
   - ç»„ä»¶: TimeTrackPage (å®¹å™¨)

2. timetrack-dashboard (å­è·¯ç”±ï¼Œéšè—)
   - åç§°: æ—¶é—´è½´
   - å›¾æ ‡: ğŸ“Š
   - ç»„ä»¶: Dashboard (æ‡’åŠ è½½)

3. timetrack-category (å­è·¯ç”±ï¼Œéšè—)
   - åç§°: åˆ†ç±»ç®¡ç†
   - å›¾æ ‡: ğŸ·ï¸
   - ç»„ä»¶: TimeTrackCategory (æ‡’åŠ è½½)
```

### 3. ç»„ä»¶ç»“æ„

```
TimeTrackPage (å®¹å™¨)
â”œâ”€â”€ SubNavigation (NavBar ç»„ä»¶)
â”‚   â”œâ”€â”€ [ğŸ“Š æ—¶é—´è½´]
â”‚   â””â”€â”€ [ğŸ·ï¸ åˆ†ç±»ç®¡ç†]
â””â”€â”€ Content Area
    â”œâ”€â”€ Dashboard (æ—¶é—´è¿½è¸ªæ—¶é—´è½´)
    â”‚   â”œâ”€â”€ å½“å‰æ´»åŠ¨çª—å£ä¿¡æ¯
    â”‚   â”œâ”€â”€ é…è‰²/å¸ƒå±€æ§åˆ¶
    â”‚   â”œâ”€â”€ æ—¥æœŸé€‰æ‹©
    â”‚   â””â”€â”€ Timeline ç»„ä»¶
    â”‚
    â””â”€â”€ TimeTrackCategory (åˆ†ç±»ç®¡ç†)
        â”œâ”€â”€ é¡µé¢æ ‡é¢˜å’Œæè¿°
        â””â”€â”€ CategoryManager ç»„ä»¶
```

## ğŸ¯ å®ç°çš„åŠŸèƒ½

### ç”¨æˆ·è§†è§’

1. **ä¸»å¯¼èˆªæ˜¾ç¤º**
   - ç”¨æˆ·çœ‹åˆ° "â±ï¸ æ—¶é—´è¿½è¸ª" åœ¨ä¸»å¯¼èˆªæ 
   - ç‚¹å‡»åè¿›å…¥ TimeTrack æ¨¡å—

2. **å­å¯¼èˆªåˆ‡æ¢**
   - è¿›å…¥æ¨¡å—åçœ‹åˆ°ä¸¤ä¸ªå­é¡µé¢é€‰é¡¹å¡
   - "ğŸ“Š æ—¶é—´è½´" - æ˜¾ç¤ºæ—¶é—´è¿½è¸ªæ•°æ®
   - "ğŸ·ï¸ åˆ†ç±»ç®¡ç†" - ç®¡ç†åº”ç”¨åˆ†ç±»

3. **é¡µé¢åˆ‡æ¢**
   - åœ¨å­é¡µé¢ä¹‹é—´åˆ‡æ¢æ— éœ€ç¦»å¼€ TimeTrack æ¨¡å—
   - ä¿æŒä¸Šä¸‹æ–‡ï¼Œä½“éªŒæµç•…

### æŠ€æœ¯å®ç°

1. **æ‡’åŠ è½½ä¼˜åŒ–**
   ```typescript
   const Dashboard = lazy(() => import('./Dashboard'));
   const TimeTrackCategory = lazy(() => import('./TimeTrackCategory'));
   ```
   - å­é¡µé¢æŒ‰éœ€åŠ è½½
   - å‡å°‘åˆå§‹åŒ…ä½“ç§¯
   - æå‡åŠ è½½é€Ÿåº¦

2. **è·¯ç”±éšè—**
   ```typescript
   hidden: true  // å­è·¯ç”±ä¸åœ¨ä¸»å¯¼èˆªæ˜¾ç¤º
   ```
   - ä¸»å¯¼èˆªç®€æ´
   - å­å¯¼èˆªåœ¨æ¨¡å—å†…éƒ¨

3. **è‡ªåŠ¨é»˜è®¤è·¯ç”±**
   ```typescript
   if (current === 'timetrack') {
     return 'timetrack-dashboard';  // é»˜è®¤æ˜¾ç¤ºæ—¶é—´è½´
   }
   ```
   - è®¿é—®ä¸»è·¯ç”±è‡ªåŠ¨æ˜¾ç¤º Dashboard
   - æ— éœ€é¢å¤–é…ç½®

4. **å¤ç”¨ NavBar ç»„ä»¶**
   - ä½¿ç”¨ç»Ÿä¸€çš„å¯¼èˆªç»„ä»¶
   - æ ·å¼å’Œäº¤äº’ä¸€è‡´
   - ä»£ç å¤ç”¨

## ğŸ“Š å¯¹æ¯”æ•ˆæœ

### é‡æ„å‰
```
ä¸»å¯¼èˆª:
â”œâ”€â”€ ğŸ“Š ä»ªè¡¨ç›˜
â”œâ”€â”€ ğŸ·ï¸ åˆ†ç±»ç®¡ç†        â† ç‹¬ç«‹é¡µé¢
â”œâ”€â”€ ğŸµ é¢‘è°±åˆ†æ
â””â”€â”€ âš™ï¸ è®¾ç½®

é—®é¢˜:
âŒ æ—¶é—´è¿½è¸ªåŠŸèƒ½åˆ†æ•£
âŒ å¯¼èˆªå±‚çº§ä¸æ¸…æ™°
âŒ CategoryManager ä½ç½®å¥‡æ€ª
```

### é‡æ„å
```
ä¸»å¯¼èˆª:
â”œâ”€â”€ ğŸ“Š ä»ªè¡¨ç›˜
â”œâ”€â”€ â±ï¸ æ—¶é—´è¿½è¸ª         â† åŠŸèƒ½æ¨¡å—
â”‚   â”œâ”€â”€ ğŸ“Š æ—¶é—´è½´       â† å­å¯¼èˆª
â”‚   â””â”€â”€ ğŸ·ï¸ åˆ†ç±»ç®¡ç†    â† å­å¯¼èˆª
â”œâ”€â”€ ğŸµ é¢‘è°±åˆ†æ
â””â”€â”€ âš™ï¸ è®¾ç½®

ä¼˜åŠ¿:
âœ… åŠŸèƒ½å½’ç±»æ¸…æ™°
âœ… å±‚çº§ç»“æ„åˆç†
âœ… åˆ†ç±»ç®¡ç†å½’å±æ˜ç¡®
âœ… æ˜“äºæ‰©å±•æ–°å­é¡µé¢
```

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### åœ¨ App.tsx ä¸­æ³¨å†Œ

```typescript
import { onMount } from 'solid-js';
import { registerTimeTrackRoutes } from './Timeline';

const App = () => {
  onMount(() => {
    registerTimeTrackRoutes();
  });

  return <div>{/* åº”ç”¨å†…å®¹ */}</div>;
};
```

### å¯¼èˆªæµç¨‹

1. ç”¨æˆ·ç‚¹å‡»ä¸»å¯¼èˆªçš„ "æ—¶é—´è¿½è¸ª"
   â†’ è·¯ç”±: `timetrack`
   â†’ æ¸²æŸ“: TimeTrackPage å®¹å™¨
   â†’ é»˜è®¤æ˜¾ç¤º: Dashboard (æ—¶é—´è½´)

2. ç”¨æˆ·ç‚¹å‡»å­å¯¼èˆªçš„ "åˆ†ç±»ç®¡ç†"
   â†’ è·¯ç”±: `timetrack-category`
   â†’ åœ¨å®¹å™¨å†…åˆ‡æ¢åˆ°: TimeTrackCategory

3. ç”¨æˆ·ç‚¹å‡»å…¶ä»–ä¸»å¯¼èˆª
   â†’ ç¦»å¼€ TimeTrack æ¨¡å—
   â†’ æ¸²æŸ“å…¶ä»–é¡µé¢

## ğŸ’¡ æ‰©å±•ç¤ºä¾‹

### æ·»åŠ "ç»Ÿè®¡åˆ†æ"å­é¡µé¢

1. åˆ›å»ºç»„ä»¶
   ```typescript
   // src/Timeline/Statistics.tsx
   const Statistics: Component = () => {
     return <div>ç»Ÿè®¡åˆ†æå†…å®¹</div>;
   };
   ```

2. æ³¨å†Œè·¯ç”±
   ```typescript
   router.addRoute({
     id: 'timetrack-statistics',
     name: 'ç»Ÿè®¡åˆ†æ',
     path: '/timetrack/statistics',
     icon: 'ğŸ“ˆ',
     hidden: true,
   });
   ```

3. æ·»åŠ åˆ°å­å¯¼èˆª
   ```typescript
   const subRoutes: NavItem[] = [
     { id: 'timetrack-dashboard', label: 'æ—¶é—´è½´', icon: 'ğŸ“Š' },
     { id: 'timetrack-category', label: 'åˆ†ç±»ç®¡ç†', icon: 'ğŸ·ï¸' },
     { id: 'timetrack-statistics', label: 'ç»Ÿè®¡åˆ†æ', icon: 'ğŸ“ˆ' },  // æ–°å¢
   ];
   ```

4. æ·»åŠ æ¸²æŸ“é€»è¾‘
   ```typescript
   <Show when={activeSubRoute() === 'timetrack-statistics'}>
     <Statistics />
   </Show>
   ```

## ğŸ“ æœ€ç»ˆæ–‡ä»¶ç»“æ„

```
src/Timeline/
â”œâ”€â”€ TimeTrackPage.tsx              # å®¹å™¨ç»„ä»¶ï¼ˆå­å¯¼èˆªï¼‰
â”œâ”€â”€ Dashboard.tsx                  # æ—¶é—´è½´é¡µé¢
â”œâ”€â”€ TimeTrackCategory.tsx          # åˆ†ç±»ç®¡ç†é¡µé¢
â”œâ”€â”€ Timeline.tsx                   # æ—¶é—´è½´æ ¸å¿ƒç»„ä»¶
â”œâ”€â”€ TimelineRenderer.tsx           # æ—¶é—´è½´æ¸²æŸ“å™¨
â”œâ”€â”€ TimelineService.ts             # æ—¶é—´è½´æœåŠ¡
â”œâ”€â”€ DatabaseSize.tsx               # æ•°æ®åº“å¤§å°ç»„ä»¶
â”œâ”€â”€ registerRoute.ts               # è·¯ç”±æ³¨å†Œ
â”œâ”€â”€ index.ts                       # ç»Ÿä¸€å¯¼å‡º
â”œâ”€â”€ README.md                      # æ¨¡å—æ–‡æ¡£
â”œâ”€â”€ TimeTrackPage.module.css       # å®¹å™¨æ ·å¼
â”œâ”€â”€ TimeTrackCategory.module.css   # åˆ†ç±»é¡µé¢æ ·å¼
â”œâ”€â”€ TimelinePage.module.css        # Dashboard æ ·å¼
â””â”€â”€ timeline.module.css            # Timeline ç»„ä»¶æ ·å¼
```

## ğŸ‰ æ€»ç»“

### å®Œæˆæƒ…å†µ
- âœ… Dashboard ç»„ä»¶åˆ›å»ºå¹¶ç‹¬ç«‹
- âœ… TimeTrackCategory ç»„ä»¶åˆ›å»º
- âœ… TimeTrackPage å®¹å™¨é‡æ„
- âœ… è·¯ç”±ç³»ç»Ÿé…ç½®å®Œæˆ
- âœ… æ ·å¼æ–‡ä»¶åˆ›å»º
- âœ… æ‡’åŠ è½½å®ç°
- âœ… æ–‡æ¡£ç¼–å†™å®Œæˆ

### æ€§èƒ½ä¼˜åŒ–
- âš¡ æ‡’åŠ è½½å‡å°‘åˆå§‹åŒ…å¤§å°
- âš¡ å­é¡µé¢æŒ‰éœ€åŠ è½½
- âš¡ è·¯ç”±éšè—å‡å°‘ä¸»å¯¼èˆªå¤æ‚åº¦

### ä»£ç è´¨é‡
- ğŸ—ï¸ æ¨¡å—åŒ–ç»“æ„æ¸…æ™°
- ğŸ”§ æ˜“äºç»´æŠ¤å’Œæ‰©å±•
- ğŸ“¦ ç»„ä»¶èŒè´£å•ä¸€
- ğŸ¨ å¤ç”¨ NavBar ç»„ä»¶

### ç”¨æˆ·ä½“éªŒ
- ğŸ¯ åŠŸèƒ½å½’ç±»åˆç†
- ğŸš€ é¡µé¢åˆ‡æ¢æµç•…
- ğŸ“± å¯¼èˆªå±‚çº§æ¸…æ™°
- âœ¨ åŠ è½½é€Ÿåº¦æå‡

é‡æ„å®Œæˆï¼ğŸ‰
